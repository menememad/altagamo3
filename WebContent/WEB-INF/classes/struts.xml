<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts PUBLIC "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN" 
		"struts-2.0.dtd">
<struts>
	<constant name="struts.devMode" value="false" />
	<constant name="struts.custom.i18n.resources" value="global" />
	<constant name="struts.i18n.reload" value="false" /> 
	<constant name="struts.configuration.xml.reload" value="false" />
	<!--  constant name="struts.multipart.saveDir" value="C:\\\workspaces\Allamco\AllamcoWeb\WebContent\images" /-->
	<!--  constant name="struts.multipart.saveDir" value="/home/allamco1/public_html/images" /-->


<!-- include file="interceptors.xml" /-->
	<!-- include file="PropertySearchAction.xml" /-->

<package name="default" namespace="/" extends="interceptors,tiles-default,json-default,i18n">
	<global-results>
		<result name="success">/confirm.jsp</result>
		<result name="error" type="tiles">error</result>		
		<result name="login">/index.html</result>
		<result name="preChangePassword">/pages/security/changePassword.jsp</result>
	</global-results>
	<action name="*">
		<interceptor-ref name="defaultStack"/>			
		<interceptor-ref name="scope">
			<param name="session">userInfo</param>
		    <param name="autoCreateSession">true</param>
		</interceptor-ref>	
		<result name="success">/pages/security/login.jsp</result>
	</action>	
<!-- Security -->
	<action name="welcome" class="com.altagamo3.web.actions.SecurityAction" method="welcome">
		<interceptor-ref name="defaultStack"/>			
 		<interceptor-ref name="scope">
			<param name="type">start</param>
			<param name="session">property,propertySearch</param>
		    <param name="autoCreateSession">true</param>
		</interceptor-ref>	
		<result name="success" type="tiles">welcome</result>
		<result name="visitor" type="tiles">visitorTile</result>
		<result name="seller" type="tiles">sellerTile</result>
		<result name="admin" type="tiles">adminTile</result>
	</action>	
	<action name="preLogin" class="com.altagamo3.web.actions.SecurityAction" method="preLogin">
		<interceptor-ref name="defaultStack"/>			
		<result name="success">/welcome.jsp</result>
	</action>	
	<action name="login" class="com.altagamo3.web.actions.SecurityAction" method="login">
		<interceptor-ref name="defaultStack"/>			
		<result name="visitor" type="tiles">visitorTile</result>
		<result name="seller" type="tiles">sellerTile</result>
		<result name="admin" type="tiles">adminTile</result>
		<result name="input" type="tiles">welcome</result>
	</action>	
	<action name="logout" class="com.altagamo3.web.actions.SecurityAction" method="logout">
		<interceptor-ref name="defaultStack"/>
		<result name="success">/index.html</result>
	</action>	
	<action name="resetPassword" class="com.altagamo3.web.actions.SecurityAction" method="resetPassword">
		<interceptor-ref name="defaultStack"/>
		<result name="success">/pages/security/confirm.jsp</result>
		<result name="error">error.jsp</result>
	</action>	
<!-- Users -->	
	<action name="preAddUser" class="com.altagamo3.web.actions.UserAction" method="preAddUser">
		<interceptor-ref name="defaultStack"/>
		<result name="success">/pages/security/addUser.jsp</result>
	</action>
	<action name="addUser" class="com.altagamo3.web.actions.UserAction" method="addUser">
    	<interceptor-ref name="fileUpload">         
    		<param name="maximumSize">2097152</param>         
    		<param name="allowedTypes">image/png,image/gif,image/jpeg,image/pjpeg,image/png</param>     
    	</interceptor-ref>		
    	<interceptor-ref name="defaultStack"/>			
		<result name="success">/pages/security/addUser.jsp</result>
		<result name="input">/pages/security/addUser.jsp</result>
		<result name="login">/pages/security/login.jsp</result>
	</action>	
	<action name="preEditUser" class="com.altagamo3.web.actions.UserAction" method="preEditUser">
		<interceptor-ref name="defaultStack"/>			
		<result name="success">/pages/security/editUser.jsp</result>
	</action>	
	<action name="editUser" class="com.altagamo3.web.actions.UserAction" method="editUser">
    	<interceptor-ref name="fileUpload">         
    		<param name="maximumSize">2097152</param>         
    		<param name="allowedTypes">image/png,image/gif,image/jpeg,image/pjpeg,image/png</param>     
    	</interceptor-ref>		
    	<interceptor-ref name="defaultStack"/>			
		<result name="success">/pages/security/confirm.jsp</result>
		<result name="input">/pages/security/editUser.jsp</result>
	</action>	
	<action name="viewUser" class="com.altagamo3.web.actions.UserAction" method="preEditUser">
		<interceptor-ref name="defaultStack"/>			
		<result name="success">/pages/security/viewUser.jsp</result>
	</action>	
	<action name="changePassword" class="com.altagamo3.web.actions.SecurityAction" method="changePassword">
		<interceptor-ref name="defaultStack"/>
		<result name="input">/pages/security/changePassword.jsp</result>			
		<result name="success">/pages/security/confirm.jsp</result>
	</action>	
	<action name="preListUsers" class="com.altagamo3.web.actions.UserAction" method="preListUsers">
		<result name="success">/pages/security/listUsers.jsp</result>
	</action>
	<action name="listUsers" class="com.altagamo3.web.actions.UserAction" method="listUsers">
		<result name="success" type="json" />
	</action>
<!-- Properties -->
	<action name="preAddProperty" class="com.altagamo3.web.actions.PropertyAction" method="preAddProperty">
		<interceptor-ref name="defaultStack"/>			
		<interceptor-ref name="scope">
			<param name="type">start</param>
			<param name="session">property</param>
		    <param name="autoCreateSession">true</param>
		</interceptor-ref>	
		<result name="success">/pages/properties/addProperty.jsp</result>
		<result name="input">/pages/properties/addProperty.jsp</result>
	</action>	
	<action name="addProperty" class="com.altagamo3.web.actions.PropertyAction" method="addProperty">
    	<interceptor-ref name="fileUpload">         
    		<param name="maximumSize">5242880</param>         
    		<param name="allowedTypes">image/png,image/gif,image/jpeg,image/pjpeg</param>     
    	</interceptor-ref>		
    	<interceptor-ref name="defaultStack"/>
    	<result name="success">/pages/properties/addProperty.jsp</result>
    	<result name="input">/pages/properties/addProperty.jsp</result>
	</action>
	<action name="getPropertyDetails" class="com.altagamo3.web.actions.PropertyAction" method="getPropertyDetails">
		<interceptor-ref name="defaultStack"/>			
	    <result name="success">/pages/properties/propertyDetails.jsp</result>
	    <result name="input">/pages/properties/searchResult.jsp</result>
	</action>
	<action name="preEditProperty" class="com.altagamo3.web.actions.PropertyAction" method="getPropertyDetails">
		<interceptor-ref name="defaultStack"/>			
		<result name="success">/pages/properties/editProperty.jsp</result>
		<result name="input">/pages/properties/searchResult.jsp</result>
	</action>	
	<action name="editProperty" class="com.altagamo3.web.actions.PropertyAction" method="editProperty">
		<interceptor-ref name="defaultStack"/>
		<result name="success">/pages/properties/editProperty.jsp</result>
		<result name="input">/pages/properties/editProperty.jsp</result>
	</action>
	<action name="approveProperty" class="com.altagamo3.web.actions.PropertyAction" method="approveProperty">
		<interceptor-ref name="defaultStack"/>
		<result name="success">/pages/properties/confirmProperty.jsp</result>
	</action>	
	<action name="batchEdit" class="com.altagamo3.web.actions.PropertyAction" method="batchEdit">
		<interceptor-ref name="defaultStack"/>
		<result name="success">/pages/properties/searchResult.jsp</result>
	</action>	
		<action name="changePropertyStatus" class="com.altagamo3.web.actions.PropertyAction" method="changePropertyStatus">
		<interceptor-ref name="defaultStack"/>
		<result name="success">/pages/properties/confirmProperty.jsp</result>
	</action>	
		
<!-- Properties Search-->
	<action name="searchPropertyFor" class="com.altagamo3.web.actions.PropertySearchAction" method="searchPropertyFor">
	   	<interceptor-ref name="defaultStack"/>			
		<result name="success">/pages/properties/searchResult.jsp</result>
	</action>	
	<action name="fastSearch" class="com.altagamo3.web.actions.PropertySearchAction" method="fastSearch">
	   	<interceptor-ref name="defaultStack"/>			
		<result name="success">/pages/properties/searchResult.jsp</result>
	</action>	
	<action name="searchPropertyType" class="com.altagamo3.web.actions.PropertySearchAction" method="searchPropertyType">
	   	<interceptor-ref name="defaultStack"/>			
		<result name="success">/pages/properties/searchResult.jsp</result>
	</action>	
		
	<action name="preSearchProperty" class="com.altagamo3.web.actions.PropertySearchAction" method="preSearchProperty">
		<interceptor-ref name="defaultStack"/>			
		<result name="success">/pages/properties/searchProperty.jsp</result>
	</action>
	<action name="searchProperty" class="com.altagamo3.web.actions.PropertySearchAction" method="searchProperty">	
    	<interceptor-ref name="defaultStack"/>
    	<result name="success">/pages/properties/searchResult.jsp</result>
    	<result name="input">/pages/properties/searchProperty.jsp</result>			
	</action>
	<action name="searchAllProperties" class="com.altagamo3.web.actions.PropertySearchAction" method="searchAllProperties">	
    	<interceptor-ref name="defaultStack"/>
    	<result name="success">/pages/properties/searchResult.jsp</result>			
	</action>
    <action name="searchPropertyByStatus" class="com.altagamo3.web.actions.PropertySearchAction" method="searchPropertyByStatus">
        <interceptor-ref name="defaultStack"/>
	     <result name="success">/pages/properties/searchResult.jsp</result>
    </action>	
    <action name="searchMyProperties" class="com.altagamo3.web.actions.PropertySearchAction" method="searchMyProperties">
        <interceptor-ref name="defaultStack"/>
	     <result name="success">/pages/properties/searchResult.jsp</result>
    </action>	
    <action name="searchMyFavorites" class="com.altagamo3.web.actions.PropertySearchAction" method="searchMyFavorites">
        <interceptor-ref name="defaultStack"/>
	     <result name="success">/pages/properties/searchResult.jsp</result>
    </action>	
    
    
<!-- Lookups -->
	<action name="listPropertyTypes" class="com.altagamo3.web.actions.LookupAction" method="listPropertyTypes">
		<result name="success" type="json" />
	</action>
	<action name="listCountries" class="com.altagamo3.web.actions.LookupAction" method="listCountries">
		<result name="success" type="json" />
	</action>
	<action name="listStates" class="com.altagamo3.web.actions.LookupAction" method="listStates">
		<result name="success" type="json" />
	</action>
	<action name="listCities" class="com.altagamo3.web.actions.LookupAction" method="listCities">
		<result name="success" type="json" />
	</action>
	<action name="listCompounds" class="com.altagamo3.web.actions.LookupAction" method="listCompounds">
		<result name="success" type="json" />
	</action>
	<action name="listDistricts" class="com.altagamo3.web.actions.LookupAction" method="listDistricts">
		<result name="success" type="json" />
	</action>
		<action name="listZones" class="com.altagamo3.web.actions.LookupAction" method="listZones">
		<result name="success" type="json" />
	</action>
		<action name="listSubareas" class="com.altagamo3.web.actions.LookupAction" method="listSubareas">
		<result name="success" type="json" />
	</action>
		<action name="listAllCountries" class="com.altagamo3.web.actions.LookupAction" method="listAllCountries">
		<result name="success" type="json" />
	</action>
	<action name="listAllStates" class="com.altagamo3.web.actions.LookupAction" method="listAllStates">
		<result name="success" type="json" />
	</action>
	<action name="listAllCities" class="com.altagamo3.web.actions.LookupAction" method="listAllCities">
		<result name="success" type="json" />
	</action>
	<action name="listAllCompounds" class="com.altagamo3.web.actions.LookupAction" method="listAllCompounds">
		<result name="success" type="json" />
	</action>
	<action name="listAllSubareas" class="com.altagamo3.web.actions.LookupAction" method="listAllSubareas">
		<result name="success" type="json" />
	</action>

	<!-- Image Displayer -->
	<action name="displayUserImage" class="com.altagamo3.web.actions.ImageDisplayerAction" method="displayUserImage">
		<result name="success" type="stream">
            <param name="contentType">${fileContentType}</param>
            <param name="inputName">inputStream</param>
            <param name="contentDisposition">attachment; filename="${filename}"</param>
            <param name="bufferSize">1024</param>
    	</result>
    	<result name="error">/images/placeholder.jpg</result>	
	</action>
	<action name="displayPropertyImage" class="com.altagamo3.web.actions.ImageDisplayerAction" method="displayPropertyImage">
		<result name="success" type="stream">
            <param name="contentType">${fileContentType}</param>
            <param name="inputName">inputStream</param>
            <param name="contentDisposition">attachment; filename="${filename}"</param>
            <param name="bufferSize">1024</param>
    	</result>	
    	<result name="error">/images/placeholder.jpg</result>
	</action>
	<action name="displayMarqueeData" class="com.altagamo3.web.actions.AdsAction" method="displayMarqueeData">
		<result name="success" type="stream">
			<param name="contentType">image/html</param>
			<param name="inputName">inputStream</param>
            <param name="charSet">UTF-8</param>
		</result>
	</action>
			
</package>
</struts>